<head>
    <link rel="stylesheet" type="text/css" href="deps/framework/fss/css/fss-layout.css" />
    <link rel="stylesheet" type="text/css" href="deps/framework/fss/css/fss-text.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/fss/fss-theme-bw-uio.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/fss/fss-theme-wb-uio.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/fss/fss-theme-by-uio.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/fss/fss-theme-yb-uio.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/fss/fss-text-uio.css" />

    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/UIOptions.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/FullUIOptions.css" />
    <link rel="stylesheet" type="text/css" href="deps/components/uiOptions/css/FullNoPreviewUIOptions.css" />

    <script type="text/javascript" src="deps/MyInfusion.js"></script>
    <script type="text/javascript" src="deps/GPIIStore.js"></script>
</head>

<body>
    <!-- This div should be placed where the Table of Contents is to be displayed -->
    <div class="flc-toc-tocContainer"> </div>

    <h1> Personal Control Panel Prototype </h1>

    <!-- This is the div that will contain the UI Options component -->
    <div id="pcpMainSettings"> </div>

    <script type="text/javascript">
        fluid.staticEnvironment.gpiiPcp = fluid.typeTag("gpii.pcp");

        fluid.pageEnhancer({
            //tocTemplate: "deps/components/tableOfContents/html/TableOfContents.html",
            classnameMap: {
                theme: {
                    "black": "fl-uio-default-theme",
                    "white": "fl-uio-default-theme",
                    "yellow": "fl-uio-default-theme",
                    "green": "fl-uio-default-theme",
                    "blue": "fl-uio-default-theme"
                }
            },

            defaultSiteSettings: {
                theme: "black",             // key from classname map
                textSize: 1,                  // in points
                toc: false,                   // boolean
            }
        });

        fluid.uiOptions.fullNoPreview("#pcpMainSettings", {
            // Tell UIOptions where to find all the templates, relative to this file
            prefix: "deps/components/uiOptions/html/",

            textControls: {
                options: {
                    classnameMap: "{uiEnhancer}.options.classnameMap",
                    strings: {
                        theme: ["Black", "White", "Yellow", "Green", "Blue"]
                    },
                    controlValues: {
                        theme: ["black", "white", "yellow", "green", "blue"]
                    },

                    textSize: {
                        min: 8,
                        max: 24,
                        step: 1 // I need a way to modify the step - this isn't working
                    }
                }
            },

            templateLoader: {
                options: {
                    templates: {
                        uiOptions: "deps/pcp_templates/pcpMainDialog.html",
                        textControls: "deps/pcp_templates/UIOptionsTemplate-text.html",
                        layoutControls: "deps/pcp_templates/UIOptionsTemplate-layout.html"
                    }
                }
            },

            // Tell UIOptions where to redirect to if the user cancels the operation
            uiOptions: {
                options: {
                    listeners: {
                        onCancel: function(){
                            window.location = "";
                        }
                    }
                }
            }
        });

        // This demand isn't appropriate and it somehow brakes the save() function
        /*fluid.demands("fluid.textfieldSlider", ["fluid.uiOptions", "gpii.pcp"], {
            options: {
                model: {
                    value: 12,
                    min: 10,
                    max: 20
                },
                sliderOptions: {
                    step: 1
                }
            }
        });*/
    </script>

</body>